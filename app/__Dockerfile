FROM eclipse-temurin:17.0.13_11-jre-noble

WORKDIR /service

COPY target/*.jar ./app.jar

ARG PROFILE=prod

ENV SPRING_PROFILES_ACTIVE=$PROFILE
ENV MESSAGE_QUEUE_HOST=messagequeue
ENV CATEGORIA_PRODUTO_SERVICE_HOST=categoria
ENV PAGAMENTO_SERVICE_HOST=pagamento
ENV PRODUTO_SERVICE_HOST=produto
ENV DB_NAME=lanchdb
ENV DB_USER=lanchuser
ENV DB_PASSWORD=lanch@1234
ENV DB_HOST=dbserver
ENV DB_PORT=5432
ENV JWT_KEY_VALUE=f6UZe3w8OacPa9ccturVD4RJLSwClGqrvjwEr7Tbv2E=

CMD ["java", "-jar", "./app.jar"]
